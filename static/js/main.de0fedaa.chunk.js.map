{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/App/App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/App/App.jsx","services/fetch-services.js","index.js"],"names":["module","exports","Searchbar","state","value","handlerSearch","e","setState","currentTarget","handlerSubmit","preventDefault","props","onSubmit","className","s","SearchForm","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","tags","id","handlerItemClick","onClick","src","alt","ImageGalleryItemImage","ImageGallery","top","list","map","el","indx","key_id","Button","isOff","disabled","visible","color","height","width","modalContainer","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","children","fetchService","searchQuery","pageNumber","currentCount","perPage","axios","request","baseURL","params","image_type","orientation","q","page","per_page","key","response","data","hits","totalHits","fetchData","shortid","require","App","images","showModal","isLoading","currentImg","totalImgs","search","scrollTo","then","generate","catch","console","log","finally","handleLoadMore","HeightBeforeRender","documentElement","scrollHeight","nextDataPortion","prevState","handlerScrollTo","toggleModal","current","find","largeImageURL","renderedContentHeight","behavior","isButtonVisible","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.de0fedaa.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__M-Y1Z\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__2Kabn\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__RTZr_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1RHo-\",\"Modal\":\"Modal_Modal__1_Lm6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2X_Rg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3c_jK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__29_A2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1pG-n\",\"SearchForm\":\"Searchbar_SearchForm__2WeWf\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1bnI8\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3lxD8\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1DCxF\"};","import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  state = { value: '' };\n  handlerSearch = e => {\n    this.setState({ value: e.currentTarget.value });\n  };\n  handlerSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.value);\n  };\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handlerSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.value}\n            onChange={this.handlerSearch}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\nexport default Searchbar;\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ webformatURL, tags, id, handlerItemClick }) => {\n  return (\n    <li\n      className={s.ImageGalleryItem}\n      onClick={() => {\n        handlerItemClick(id);\n      }}\n    >\n      <img src={webformatURL} alt={tags} className={s.ImageGalleryItemImage} />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  handlerItemClick: PropTypes.func.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n};\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../../components/ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  state = { top: 0 };\n\n  render() {\n    const { list, handlerItemClick } = this.props;\n    return (\n      <ul className={s.ImageGallery}>\n        {list.map((el, indx) => (\n          <ImageGalleryItem\n            key={el.key_id}\n            webformatURL={el.webformatURL}\n            tags={el.tags}\n            id={el.id}\n            handlerItemClick={handlerItemClick}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\nImageGallery.propTypes = {\n  list: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n  handlerItemClick: PropTypes.func.isRequired,\n};\nexport default ImageGallery;\n","import { Component } from 'react';\nimport s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Spinner from 'react-loader-spinner';\n\nclass Button extends Component {\n  render() {\n    const { isOff, onClick } = this.props;\n    return (\n      <button\n        disabled={isOff}\n        className={s.Button}\n        type=\"button\"\n        onClick={onClick}\n      >\n        {!isOff && 'Load more . . .'}\n        <Spinner\n          visible={isOff}\n          type=\"ThreeDots\"\n          color=\"#FFF\"\n          height={20}\n          width={70}\n        />\n      </button>\n    );\n  }\n}\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  isOff: PropTypes.bool.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport s from './Modal.module.css';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst modalContainer = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalContainer,\n    );\n  }\n}\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\nexport default Modal;\n","import { Component } from 'react';\nimport s from './App.module.css';\nimport Searchbar from '../../components/Searchbar';\nimport ImageGallery from '../../components/ImageGallery';\nimport Button from '../../components/Button';\nimport Modal from '../../components/Modal';\n\nimport FetchService from '../../services/fetch-services';\nconst fetchService = new FetchService();\nconst shortid = require('shortid');\n\nclass App extends Component {\n  state = {\n    images: [],\n    showModal: false,\n    isLoading: false,\n    currentImg: { src: '', alt: '' },\n    totalImgs: 0,\n  };\n\n  handlerSubmit = search => {\n    window.scrollTo(0, 0);\n    this.setState({ isLoading: true });\n    fetchService.searchQuery = search;\n    fetchService.pageNumber = 1;\n    fetchService.currentCount = 0;\n    fetchService\n      .fetchData()\n      .then(data => {\n        const images = data.hits.map(el => ({\n          ...el,\n          key_id: shortid.generate(),\n        }));\n        this.setState({ images: [...images], totalImgs: data.totalHits });\n      })\n      .catch(console.log)\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  handleLoadMore = () => {\n    const HeightBeforeRender = document.documentElement.scrollHeight;\n    this.setState({ isLoading: true });\n    fetchService\n      .nextDataPortion()\n      .then(data => {\n        this.setState(prevState => {\n          const images = data.hits.map(el => ({\n            ...el,\n            key_id: shortid.generate(),\n          }));\n          return { images: [...prevState.images, ...images] };\n        });\n      })\n      .catch(console.log)\n      .then(() => {\n        this.handlerScrollTo(HeightBeforeRender);\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  handlerItemClick = id => {\n    this.toggleModal();\n    const current = this.state.images.find(el => el.id === id);\n    this.setState({\n      currentImg: { src: current.largeImageURL, alt: current.tags },\n    });\n  };\n  handlerScrollTo = height => {\n    const searchElementHeight = 70;\n    const buttonLoadmoreHeight = 80;\n    const renderedContentHeight =\n      document.documentElement.scrollHeight - height;\n    const scrollTo =\n      document.documentElement.scrollHeight - renderedContentHeight;\n    window.scrollTo({\n      top: scrollTo - (searchElementHeight + buttonLoadmoreHeight),\n      behavior: 'smooth',\n    });\n  };\n  toggleModal = () => {\n    this.setState(prevState => ({ showModal: !prevState.showModal }));\n  };\n\n  render() {\n    const { images, isLoading, currentImg, totalImgs, showModal } = this.state;\n    const isButtonVisible =\n      images.length > 0 && fetchService.currentCount < totalImgs && !isLoading;\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handlerSubmit} />\n        <ImageGallery list={images} handlerItemClick={this.handlerItemClick} />\n\n        {isButtonVisible ? (\n          <Button isOff={false} onClick={this.handleLoadMore} />\n        ) : (\n          isLoading && <Button isOff={true} onClick={this.handleLoadMore} />\n        )}\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={currentImg.src} alt={currentImg.alt} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\nexport default App;\n","import axios from 'axios';\nconst API_KEY = '19007608-e874a299d8f055128ef720218';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class FetchService {\n  constructor() {\n    this.searchQuery = '';\n    this.pageNumber = 1;\n    this.currentCount = 0;\n    this.perPage = 12;\n  }\n\n  async fetchData() {\n    try {\n      const response = await axios.request({\n        baseURL: `${BASE_URL}`,\n        params: {\n          image_type: 'photo',\n          orientation: 'horizontal',\n          q: this.searchQuery,\n          page: this.pageNumber,\n          per_page: this.perPage,\n          key: API_KEY,\n        },\n      });\n      const { hits, totalHits } = response.data;\n      return { hits, totalHits };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async nextDataPortion() {\n    this.pageNumber += 1;\n    this.currentCount = this.pageNumber * this.perPage;\n    return this.fetchData();\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}